models:
  - name: fct_orders
    description: Orders fact table.

    semantic:
      primary_entity:
        name: order
        keys: [order_id]

      time_dimensions:
        - name: order_date
          column: order_purchase_timestamp
          time_granularity: day

      dimensions:
        - name: order_status
          column: order_status
        - name: is_delivered
          column: is_delivered
        - name: is_on_time
          column: is_on_time

      metrics:
        - name: orders
          agg: count
          column: order_id

        - name: revenue
          agg: sum
          column: order_total_value

        - name: avg_order_value
          agg: average
          column: order_total_value

        - name: avg_review_score
          agg: average
          column: review_score

        - name: avg_delivery_days
          agg: average
          column: delivery_time_days
